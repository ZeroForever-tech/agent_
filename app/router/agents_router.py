#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
智能体信息路由
定义GET /api/v1/agents接口，用于获取所有智能体及其描述
"""

from fastapi import APIRouter
from pydantic import BaseModel
from typing import List

# 创建路由实例
router = APIRouter(prefix="/api/v1", tags=["智能体信息"])

class AgentInfo(BaseModel):
    """
    智能体信息模型
    """
    name: str
    description: str
    agent_type: str
    capabilities: List


class AgentsResponse(BaseModel):
    """
    智能体列表响应模型
    """
    agents: List[AgentInfo]

# 定义智能体信息
AGENTS_INFO = [
    AgentInfo(
        name="sqrt_agent",
        description='''
        "二次根式解答与课程推荐智能体，专门处理初二下（八年级）数学《二次根式》相关内容。"
        "【知识点范围】涵盖二次根式的定义（√a 的意义、被开方数范围）、二次根式的乘法与除法（同类根式、根号运算规则）、二次根式的加法与减法（同类项合并、不同类根式化简）、二次根式的性质（最简二次根式、去根号）、二次根式的综合应用与拓展（如在几何、方程中的应用）。"
        "【课程范围】掌管并熟悉以下课程信息："
        "《二次根式(一)》《二次根式的定义》《二次根式的乘除(一)》《二次根式的乘除(二)》"
        "《二次根式的加减(一)》《二次根式的加减(二)》《二次根式的小结与复习》"
        "《二次根式的数学活动》《二次根式复习课第一课时》《二次根式复习课第二课时》。"
        "【典型题型】根号化简题、同类根式合并题、二次根式加减运算题、二次根式乘除运算题、综合计算题、实际应用题。"
        "【关键词匹配】‘二次根式’、‘根号’、‘√’、‘被开方数’、‘同类根式’、‘化简’、‘加减’、‘乘除’、‘最简二次根式’、‘去根号’。"
        "【输入特征】用户问题常涉及二次根式的定义理解、根式化简、运算（加减、乘除）、实际应用中的根式计算。"
        "【适用范围】限初二下数学《二次根式》内容，不处理一次函数、勾股定理、平行四边形或统计类问题。"
        "【排他性】若问题涉及‘函数图像’、‘直角三角形’、‘平行四边形性质’、‘平均数与中位数’，则不属于该智能体。"
        "【课程推荐】当用户提出‘不会化简根号’、‘不会做根式的加减运算’、‘乘除不会算’、‘需要复习整章内容’等需求时，该智能体可推荐匹配课程，"
        "如推荐《二次根式的定义》学习基础概念，推荐《二次根式的乘除(一)(二)》学习运算法则，推荐《二次根式的加减(一)(二)》学习同类根式合并，或推荐《二次根式复习课(一)(二)》进行整章复习。"
        ''',
        agent_type="worker",
        capabilities=[]
    ),
    AgentInfo(
        name="pythagorean_agent",
        description='''
        "勾股定理解答与课程推荐智能体，专门处理初二下（八年级）数学《第十七章 勾股定理》相关内容。"
        "【知识点范围】涵盖勾股定理（直角三角形两直角边与斜边的平方关系）、勾股定理的几何证明与代数证明、勾股定理的应用（边长计算、几何图形中的边长关系、实际问题中的应用）、勾股定理的逆定理（直角三角形判定）、逆定理的应用、综合应用与探究性学习（如勾股定理数学活动）。"
        "【课程范围】掌管并熟悉以下课程信息："
        "《勾股定理(第一课时)》《勾股定理(二)》《勾股定理(三)》《勾股定理及证明》《勾股定理简单应用》"
        "《勾股定理(第二课时)》《勾股定理(第三课时)》《勾股定理的逆定理(第一课时)》《勾股定理的逆定理(第二课时)》《勾股定理的逆定理》"
        "《勾股定理及其逆定理的应用(一)》《勾股定理及其逆定理的应用(二)》《勾股定理数学活动》"
        "《第十七章习题讲评课(一)》《第十七章阶段性复习(一)》《第十七章阶段性复习(二)》。"
        "【典型题型】边长计算题、判定直角三角形题、几何证明题、综合应用题、生活应用题。"
        "【关键词匹配】‘勾股定理’、‘直角三角形’、‘斜边’、‘直角边’、‘平方和’、‘平方差’、‘逆定理’、‘直角判定’、‘几何证明’、‘边长计算’。"
        "【输入特征】用户问题常涉及直角三角形边长计算、判定一个三角形是否为直角三角形、证明勾股定理、生活场景应用（如测量高度、距离）、勾股定理逆定理的使用。"
        "【适用范围】限初二下数学《第十七章 勾股定理》内容，不处理函数、平行四边形、二次根式或统计类问题。"
        "【排他性】若问题涉及‘一次函数图像’、‘平行四边形的性质’、‘平均数或中位数’，则不属于该智能体。"
        "【课程推荐】当用户提出‘不会证明勾股定理’、‘不会用勾股定理解边长’、‘想要学习逆定理’、‘需要例题讲解’、‘要复习整章内容’等需求时，该智能体可推荐匹配课程，"
        "如推荐《勾股定理及证明》学习证明方法，推荐《勾股定理简单应用》掌握基础应用，推荐《勾股定理的逆定理(第一课时)》学习逆定理，或推荐《第十七章阶段性复习(一)(二)》进行整章复习。"
        ''',
        agent_type="worker",
        capabilities=[]
    ),
    AgentInfo(
        name="parallelogram_agent",
        description='''
        "平行四边形问题解答与课程推荐智能体，专门处理初二下（八年级）数学《第十八章 平行四边形》相关内容。"
        "【知识点范围】包括平行四边形的定义、性质（对边平行且相等、对角相等、对角线互相平分）、判定方法（对边平行、对边相等、对角线互相平分等判定条件）、性质与判定的综合应用，特殊平行四边形（矩形、菱形、正方形）的性质与判定，及其在几何证明、面积计算和实际问题中的应用。"
        "【课程范围】掌管并熟悉以下课程信息："
        "《平行四边形(第1课时)》《平行四边形(第2课时)》《平行四边形(第3课时)》《平行四边形(第4课时)》《平行四边形(第5课时)》"
        "《平行四边形的性质(一)》《平行四边形的性质(二)》《18.1.2 平行四边形的判定(一)》《18.1.2 平行四边形的判定(二)》"
        "《平行四边形的性质和判定的综合应用(一)》《平行四边形的性质和判定的综合应用(二)》"
        "《18.2.1 特殊的平行四边形(一)——矩形》《18.2.1 特殊的平行四边形(二)——矩形》《18.2.2 特殊的平行四边形——菱形》《特殊的平行四边形(第三课时)》《特殊的平行四边形(第四课时)》《特殊的平行四边形(第五课时)》"
        "《菱形的判定》《正方形》《丰富多彩的正方形》"
        "《第十八章习题讲评课(一)》《第十八章习题讲评课》《第十八章复习(一)》《第十八章复习(二)》。"
        "【典型题型】几何证明题、判定题、性质应用题、面积计算题、综合题。"
        "【关键词匹配】‘平行四边形’、‘对边平行’、‘对角线互相平分’、‘矩形’、‘菱形’、‘正方形’、‘判定条件’、‘几何证明’、‘面积公式’。"
        "【输入特征】用户问题常涉及几何证明（证明四边形是平行四边形）、判定方法选择、性质应用、特殊平行四边形的判定与证明、面积计算、实际几何应用。"
        "【适用范围】限初二下数学《第十八章 平行四边形》内容，不处理一次函数、二次根式、勾股定理或统计类问题。"
        "【排他性】若问题涉及‘函数图象’、‘二次根式运算’、‘数据分析’，则不属于该智能体。"
        "【课程推荐】当用户提出‘不会判定平行四边形’、‘矩形和菱形的区别不清楚’、‘想要学正方形性质’、‘需要几何证明例题’、‘想要复习整章知识’等需求时，该智能体可推荐匹配的课程，"
        "如推荐《平行四边形的性质(一)》学习基本性质，推荐《18.1.2 平行四边形的判定(二)》掌握判定方法，推荐《18.2.1 特殊的平行四边形(一)——矩形》学习矩形的性质与判定，或推荐《第十八章复习(一)》《第十八章复习(二)》进行整章复习。"
        ''',
        agent_type="worker",
        capabilities=[]
    ),
    AgentInfo(
        name="linear_function_agent",
        description='''
        "一次函数问题解答与课程推荐智能体，专门处理初二下（八年级）数学《第十九章 一次函数》相关内容。"
        "【知识点范围】包括变量与函数的概念，函数的图象绘制与分析，正比例函数与一次函数的定义、解析式、图象和性质，待定系数法求一次函数解析式，一次函数与方程、不等式结合的应用题，以及一次函数在实际生活场景中的建模与应用。"
        "【课程范围】掌管并熟悉以下课程信息："
        "《变量与函数》《19.1.1 变量与函数》《19.1.2 变量与函数(二)》《函数的图象(第一课时)》《函数的图象(第二课时)》《函数的图象(三)》"
        "《正比例函数(第一课时)》《正比例函数(第二课时)》《一次函数的定义》《19.2.1 正比例函数(一)》《19.2.1 正比例函数(二)》"
        "《19.2.2 一次函数(一)》《19.2.2 一次函数(二)》《19.2.2 一次函数(三)》《19.2.3 一次函数与方程、不等式(一)》《19.2.3 一次函数与方程、不等式(二)》"
        "《一次函数的图象和性质》《待定系数法求一次函数的解析式》《一次函数的应用》《一次函数习题课(一)》《一次函数习题课(二)》《一次函数练习课》《一次函数复习课》"
        "《正比例函数复习课》《19.1 习题讲评课(一)》《19.1 习题讲评课(二)》《19.3 课题学习:选择方案》《第十九章复习题讲评(一)》《第十九章复习题讲评(二)》《第十九章全章小结与复习(一)》《第十九章全章小结与复习(二)》。"
        "【典型题型】选择题、填空题、函数图象题、解析式求解题、函数与几何结合题、应用建模题。"
        "【关键词匹配】‘一次函数’、‘y=kx+b’、‘斜率’、‘截距’、‘正比例函数’、‘待定系数’、‘函数图象’、‘直线方程’、‘函数应用’。"
        "【输入特征】用户问题常涉及函数解析式的求解、直线图象绘制、斜率和截距的关系、与几何图形结合的面积或交点问题、函数应用建模。"
        "【适用范围】限初二下数学《第十九章 一次函数》内容，不处理二次函数、指数函数、几何证明、二次根式或统计类问题。"
        "【排他性】若问题涉及‘勾股定理’、‘平行四边形’、‘数据的分析’，则不属于该智能体。"
        "【课程推荐】当用户提出‘不会画函数图象’、‘不会求一次函数解析式’、‘想理解待定系数法’、‘需要应用题讲解’、‘想做更多习题’等需求时，该智能体可推荐匹配的课程，"
        "如推荐《函数的图象(第一课时)》学习图象绘制，推荐《待定系数法求一次函数的解析式》巩固解析式求法，推荐《一次函数的应用》理解实际应用，或推荐《一次函数习题课(一)》《第十九章复习题讲评(一)》进行针对性练习与复习。"
        ''',
        agent_type="worker",
        capabilities=[]
    ),
    AgentInfo(
        name="data_analysis_agent",
        description='''
        "数据的分析问题解答与课程推荐智能体，专门处理初二下（八年级）数学《第二十章 数据的分析》相关内容。"
        "【知识点范围】涵盖平均数、中位数、众数、数据的波动、数据的波动程度等核心概念，能解答平均数的多种计算方法、不同数据集中趋势的比较、极差与方差的理解与计算、统计结果的合理性分析等问题。"
        "【课程范围】掌管并熟悉以下课程信息："
        "《平均数(第一课时)》《平均数(第二课时)》《平均数(第三课时)》《中位数与众数(第一课时)》《中位数与众数(第二课时)》"
        "《数据的波动》《数据的波动(二)》《数据的波动程度(第二课时)》《20.1.1 平均数》《20.1 习题讲评课(一)》《20.1 习题讲评课(二)》。"
        "【典型题型】选择题、填空题、统计量计算题、图表解读题、比较分析题、应用题。"
        "【关键词匹配】‘平均数’、‘中位数’、‘众数’、‘数据的波动’、‘波动程度’、‘极差’、‘方差’、‘统计图’、‘频数分布表’、‘折线图’、‘条形图’、‘扇形图’。"
        "【输入特征】用户问题通常包含统计量计算（如平均数、中位数）、图表分析、样本与总体的比较、数据合理性评价。"
        "【适用范围】限初二下数学统计单元范围，不处理函数、几何证明或二次根式类问题。"
        "【排他性】若问题涉及‘一次函数’、‘勾股定理’、‘平行四边形’、‘代数式化简’，则不属于该智能体。"
        "【课程推荐】当用户提出‘不会求平均数’、‘中位数和众数分不清’、‘想要讲解波动程度’、‘需要课程资源’、‘想要练习题’等需求时，该智能体可推荐匹配的课程，"
        "如推荐《平均数(第一课时)》进行基础学习，或推荐《数据的波动程度(第二课时)》进行深入理解。"
        ''',
        agent_type="worker",
        capabilities=[]
    )
]

@router.get("/agents", response_model=AgentsResponse)
async def get_agents():
    """
    获取所有智能体及其描述信息
    
    Returns:
        AgentsResponse: 包含所有智能体信息的响应数据
    """
    return AgentsResponse(agents=AGENTS_INFO)